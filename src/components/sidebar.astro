---
import { cn } from '@/lib/utils';
import Button from '@/components/ui/button.astro';

interface SidebarSection {
  title: string;
  items: {
    title: string;
    href: string;
    description?: string;
    icon?: string;
  }[];
}

interface Props {
  sections: SidebarSection[];
  class?: string;
}

const { sections, class: className } = Astro.props;

const isActive = (href: string) => Astro.url.pathname === href;
---

<nav
  class={cn(
    'fixed left-0 w-64 h-[calc(100vh-4rem)] overflow-y-auto border-r border-border bg-background',
    'scrollbar-thin scrollbar-thumb-border scrollbar-track-background',
    className
  )}
>
  <div class="space-y-4 py-4">
    {
      sections.map((section) => (
        <div class="px-3 py-2">
          <h2 class="mb-2 px-4 text-sm font-semibold tracking-tight text-foreground/70">
            {section.title}
          </h2>
          <div class="space-y-1">
            {section.items.map((item) => (
              <>
                <Button
                  href={item.href}
                  variant="ghost"
                  size="icon"
                  class={cn(
                    'w-full justify-start gap-3',
                    isActive(item.href) && 'bg-accent text-accent-foreground'
                  )}
                >
                  {item.icon && (
                    <span class="text-foreground/50" aria-hidden="true">
                      {item.icon}
                    </span>
                  )}
                  <span>{item.title}</span>
                </Button>
                <p class="px-8 text-xs text-muted-foreground">
                  {item.description}
                </p>
              </>
            ))}
          </div>
        </div>
      ))
    }
  </div>
</nav>
