---
import type { HTMLAttributes } from 'astro/types';
import { cn } from '@/lib/utils';

export interface TabProps extends HTMLAttributes<'div'> {
  value: string;
  title: string;
  disabled?: boolean;
  class?: string;
}

const {
  value,
  title,
  disabled = false,
  class: className,
  ...props
} = Astro.props as TabProps;

const id = `tab-${value}`;
const panelId = `panel-${value}`;
---

<button
  type="button"
  role="tab"
  id={id}
  aria-controls={panelId}
  aria-selected="false"
  data-value={value}
  disabled={disabled}
  class={cn(
    'inline-flex items-center justify-center px-3 py-1.5',
    'text-sm font-medium',
    'transition-all',
    'focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',
    'disabled:pointer-events-none disabled:opacity-50',
    'data-[selected=true]:text-foreground',
    'data-[selected=false]:text-muted-foreground hover:text-foreground',
    className
  )}
  {...props}
>
  {title}
</button>
<div
  role="tabpanel"
  id={panelId}
  aria-labelledby={id}
  hidden
  class={cn(
    'outline-none focus-visible:ring-2 focus-visible:ring-ring',
    className
  )}
>
  <slot />
</div>
